<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ball_Game: Ball Game</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ball_Game
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Ball Game </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A client-server based interactive ball game that allows multiple clients to connect to a server and manipulate balls on a shared display.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Technology Stack</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Programming Language</h2>
<ul>
<li><b>C</b>: Core implementation language</li>
<li><b>C99 Standard</b>: Modern C features and syntax</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
System Programming</h2>
<ul>
<li><b>Linux System Calls</b>: For low-level system operations</li>
<li><b>POSIX Threads (pthread)</b>: For multi-threading support</li>
<li><b>Socket Programming</b>: For network communication</li>
<li><b>Framebuffer API</b>: For direct display manipulation</li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
Network Communication</h2>
<ul>
<li><b>TCP/IP</b>: For reliable client-server communication</li>
<li><b>Socket API</b>: For network socket operations</li>
<li><b>Select I/O Multiplexing</b>: For handling multiple client connections</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
Build Tools</h2>
<ul>
<li><b>GCC</b>: GNU Compiler Collection</li>
<li><b>Make</b>: Build automation tool</li>
<li><b>GDB</b>: Debugging tool</li>
</ul>
<h2><a class="anchor" id="autotoc_md6"></a>
Development Tools</h2>
<ul>
<li><b>Doxygen</b>: Documentation generation</li>
<li><b>Git</b>: Version control system</li>
<li><b>Valgrind</b>: Memory leak detection and profiling</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Libraries</h2>
<ul>
<li><b>Standard C Library</b>: For basic I/O and data manipulation</li>
<li><b>POSIX Library</b>: For system-level operations</li>
<li><b>Linux Framebuffer Library</b>: For display operations</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Operating System</h2>
<ul>
<li><b>Linux</b>: Primary development and deployment platform</li>
<li><b>Kernel Version</b>: 5.15.0 or higher recommended</li>
</ul>
<h1><a class="anchor" id="autotoc_md9"></a>
System Architecture</h1>
<h2><a class="anchor" id="autotoc_md10"></a>
High-Level Architecture</h2>
<div class="fragment"><div class="line">graph TD</div>
<div class="line">    subgraph &quot;Server&quot;</div>
<div class="line">        S[Server Process]</div>
<div class="line">        CLM[Client List Manager]</div>
<div class="line">        LBM[Local Ball Manager]</div>
<div class="line">        TQ[Task Queue]</div>
<div class="line">        S --&gt; CLM</div>
<div class="line">        S --&gt; LBM</div>
<div class="line">        S --&gt; TQ</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph &quot;Client 1&quot;</div>
<div class="line">        C1[Client Process]</div>
<div class="line">        SBM1[Screen Ball Manager]</div>
<div class="line">        SBL1[Screen Ball List]</div>
<div class="line">        C1 --&gt; SBM1</div>
<div class="line">        SBM1 --&gt; SBL1</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph &quot;Client 2&quot;</div>
<div class="line">        C2[Client Process]</div>
<div class="line">        SBM2[Screen Ball Manager]</div>
<div class="line">        SBL2[Screen Ball List]</div>
<div class="line">        C2 --&gt; SBM2</div>
<div class="line">        SBM2 --&gt; SBL2</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph &quot;Client N&quot;</div>
<div class="line">        CN[Client Process]</div>
<div class="line">        SBMN[Screen Ball Manager]</div>
<div class="line">        SBLN[Screen Ball List]</div>
<div class="line">        CN --&gt; SBMN</div>
<div class="line">        SBMN --&gt; SBLN</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    S &lt;--&gt;|TCP/IP| C1</div>
<div class="line">    S &lt;--&gt;|TCP/IP| C2</div>
<div class="line">    S &lt;--&gt;|TCP/IP| CN</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md11"></a>
Component Interaction</h2>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant Client</div>
<div class="line">    participant Server</div>
<div class="line">    participant TaskQueue</div>
<div class="line">    participant LocalBallManager</div>
<div class="line">    participant ClientListManager</div>
<div class="line"> </div>
<div class="line">    Client-&gt;&gt;Server: Connect</div>
<div class="line">    Server-&gt;&gt;ClientListManager: Register client</div>
<div class="line">    Server-&gt;&gt;Client: Send initial game state</div>
<div class="line"> </div>
<div class="line">    Client-&gt;&gt;Server: Send command (add/delete ball)</div>
<div class="line">    Server-&gt;&gt;TaskQueue: Add task</div>
<div class="line">    TaskQueue-&gt;&gt;LocalBallManager: Process command</div>
<div class="line">    LocalBallManager-&gt;&gt;LocalBallManager: Update game state</div>
<div class="line">    LocalBallManager-&gt;&gt;ClientListManager: Notify state change</div>
<div class="line">    ClientListManager-&gt;&gt;Client: Broadcast updated state</div>
<div class="line">    Client-&gt;&gt;Client: Update display</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md12"></a>
Thread Model</h2>
<div class="fragment"><div class="line">graph TD</div>
<div class="line">    subgraph &quot;Client Threads&quot;</div>
<div class="line">        MT[Main Thread]</div>
<div class="line">        RDT[Render Thread]</div>
<div class="line">        SRT[Socket Receive Thread]</div>
<div class="line">        SST[Socket Send Thread]</div>
<div class="line"> </div>
<div class="line">        MT --&gt;|Create| RDT</div>
<div class="line">        MT --&gt;|Create| SRT</div>
<div class="line">        MT --&gt;|Create| SST</div>
<div class="line"> </div>
<div class="line">        RDT --&gt;|30 FPS| FB[Framebuffer]</div>
<div class="line">        SRT --&gt;|Receive| SB[Screen Ball List]</div>
<div class="line">        SST --&gt;|Send| SV[Server]</div>
<div class="line"> </div>
<div class="line">        UI[User Input] --&gt;|Commands| SST</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph &quot;Server Threads&quot;</div>
<div class="line">        ST[Main Thread]</div>
<div class="line">        WT1[Worker Thread 1]</div>
<div class="line">        WT2[Worker Thread 2]</div>
<div class="line">        WTN[Worker Thread N]</div>
<div class="line">        CBT[Cycle Broadcast Thread]</div>
<div class="line"> </div>
<div class="line">        ST --&gt;|Create| WT1</div>
<div class="line">        ST --&gt;|Create| WT2</div>
<div class="line">        ST --&gt;|Create| WTN</div>
<div class="line">        ST --&gt;|Create| CBT</div>
<div class="line"> </div>
<div class="line">        ST --&gt;|epoll_wait| EP[Epoll Events]</div>
<div class="line">        EP --&gt;|Accept| ST</div>
<div class="line">        EP --&gt;|EPOLLIN| ST</div>
<div class="line"> </div>
<div class="line">        ST --&gt;|Task| TQ[Task Queue]</div>
<div class="line">        TQ --&gt;|Dequeue| WT1</div>
<div class="line">        TQ --&gt;|Dequeue| WT2</div>
<div class="line">        TQ --&gt;|Dequeue| WTN</div>
<div class="line"> </div>
<div class="line">        CBT --&gt;|33 FPS| LBM[Local Ball Manager]</div>
<div class="line">        CBT --&gt;|Broadcast| CLM[Client List Manager]</div>
<div class="line">    end</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md13"></a>
Data Flow</h2>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph &quot;Client&quot;</div>
<div class="line">        UI[User Input]</div>
<div class="line">        SB[Screen Ball Manager]</div>
<div class="line">        FB[Framebuffer]</div>
<div class="line">        UI --&gt;|Commands| SB</div>
<div class="line">        SB --&gt;|Render| FB</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph &quot;Network&quot;</div>
<div class="line">        TCP[TCP/IP Socket]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph &quot;Server&quot;</div>
<div class="line">        CM[Command Parser]</div>
<div class="line">        LBM[Local Ball Manager]</div>
<div class="line">        CLM[Client List Manager]</div>
<div class="line">        CM --&gt;|Process| LBM</div>
<div class="line">        LBM --&gt;|Update| CLM</div>
<div class="line">        CLM --&gt;|Broadcast| TCP</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    UI --&gt;|Send| TCP</div>
<div class="line">    TCP --&gt;|Receive| CM</div>
<div class="line">    TCP --&gt;|Receive| SB</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md14"></a>
Project Overview</h1>
<p>Ball Game is a networked application that consists of a server and multiple clients. The server manages the game state and coordinates between clients, while each client connects to the server and displays the game on a framebuffer device.</p>
<h1><a class="anchor" id="autotoc_md15"></a>
Architecture</h1>
<p>The project is organized into three main components:</p>
<h2><a class="anchor" id="autotoc_md16"></a>
Server Component</h2>
<ul>
<li><b>Server</b>: Manages client connections and game state</li>
<li><b>Client List Manager</b>: Handles client connections and disconnections</li>
<li><b>Local Ball Manager</b>: Manages the ball objects on the server side</li>
<li><b><a class="el" href="structTask.html" title="Structure representing a task to be processed.">Task</a> Queue</b>: Processes client commands asynchronously</li>
</ul>
<h2><a class="anchor" id="autotoc_md17"></a>
Client Component</h2>
<ul>
<li><b>Client</b>: Connects to the server and receives game state updates</li>
<li><b>Screen Ball Manager</b>: Manages the display of balls on the client's screen</li>
<li><b>Screen Ball List</b>: Maintains a list of balls to be displayed</li>
</ul>
<h2><a class="anchor" id="autotoc_md18"></a>
Shared Component</h2>
<ul>
<li><b>Framebuffer Drawing</b>: Provides functions for drawing on the framebuffer</li>
<li><b>Logging</b>: Handles logging of events and errors</li>
<li><b>Console Color</b>: Provides colored output for console messages</li>
</ul>
<h1><a class="anchor" id="autotoc_md19"></a>
Features</h1>
<ul>
<li><b>Multi-client Support</b>: Multiple clients can connect to the server simultaneously</li>
<li><b>Real-time Updates</b>: Changes to the game state are broadcast to all connected clients</li>
<li><b>Interactive Ball Manipulation</b>: Clients can add, delete, and modify balls</li>
<li><b>Framebuffer Display</b>: Game is displayed directly on the framebuffer device</li>
<li><b>Threaded Architecture</b>: Uses multiple threads for rendering, sending, and receiving data</li>
</ul>
<h1><a class="anchor" id="autotoc_md20"></a>
Directory Structure</h1>
<div class="fragment"><div class="line">Ball_Game/</div>
<div class="line">├── include/</div>
<div class="line">│   ├── client/</div>
<div class="line">│   │   ├── client.h</div>
<div class="line">│   │   ├── screenball.h</div>
<div class="line">│   │   ├── screenball_list.h</div>
<div class="line">│   │   └── screenballmanager.h</div>
<div class="line">│   ├── server/</div>
<div class="line">│   │   ├── client_list_manager.h</div>
<div class="line">│   │   ├── localball.h</div>
<div class="line">│   │   ├── localball_list.h</div>
<div class="line">│   │   ├── localballmanager.h</div>
<div class="line">│   │   ├── server.h</div>
<div class="line">│   │   └── task.h</div>
<div class="line">│   └── shared/</div>
<div class="line">│       ├── console_color.h</div>
<div class="line">│       ├── fbDraw.h</div>
<div class="line">│       └── log.h</div>
<div class="line">└── src/</div>
<div class="line">    ├── client/</div>
<div class="line">    │   ├── client.c</div>
<div class="line">    │   ├── main.c</div>
<div class="line">    │   ├── screenball.c</div>
<div class="line">    │   ├── screenball_list.c</div>
<div class="line">    │   └── screenballmanager.c</div>
<div class="line">    ├── server/</div>
<div class="line">    │   ├── client_list_manager.c</div>
<div class="line">    │   ├── localballmanager.c</div>
<div class="line">    │   ├── localball_list.c</div>
<div class="line">    │   ├── loaclball.c</div>
<div class="line">    │   ├── main.c</div>
<div class="line">    │   ├── server.c</div>
<div class="line">    │   └── task.c</div>
<div class="line">    └── shared/</div>
<div class="line">        ├── fbDraw.c</div>
<div class="line">        └── log.c</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md21"></a>
Key Components</h1>
<h2><a class="anchor" id="autotoc_md22"></a>
Server</h2>
<ul>
<li>Manages client connections using sockets</li>
<li>Processes client commands and updates the game state</li>
<li>Broadcasts state changes to all connected clients</li>
<li>Uses a task queue for asynchronous command processing</li>
</ul>
<h2><a class="anchor" id="autotoc_md23"></a>
Client</h2>
<ul>
<li>Connects to the server using sockets</li>
<li>Receives game state updates from the server</li>
<li>Renders the game state on the framebuffer</li>
<li>Sends user commands to the server</li>
</ul>
<h2><a class="anchor" id="autotoc_md24"></a>
Ball Management</h2>
<ul>
<li><b>Server-side</b>: LocalBallManager maintains the authoritative game state</li>
<li><b>Client-side</b>: ScreenBallManager displays the game state</li>
<li>Balls have properties such as position, radius, and color</li>
</ul>
<h2><a class="anchor" id="autotoc_md25"></a>
Framebuffer Drawing</h2>
<ul>
<li>Provides low-level drawing functions for the framebuffer</li>
<li>Supports drawing shapes, lines, and text</li>
<li>Handles color management and screen updates</li>
</ul>
<h1><a class="anchor" id="autotoc_md26"></a>
Building and Running</h1>
<h2><a class="anchor" id="autotoc_md27"></a>
Prerequisites</h2>
<ul>
<li>Linux operating system with framebuffer support</li>
<li>GCC compiler</li>
<li>Make build system</li>
<li>pthread library</li>
</ul>
<h2><a class="anchor" id="autotoc_md28"></a>
Build Instructions</h2>
<ol type="1">
<li>Clone the repository</li>
<li>Navigate to the project directory</li>
<li>Run <code>make</code> to build both server and client</li>
</ol>
<h2><a class="anchor" id="autotoc_md29"></a>
Running the Application</h2>
<ol type="1">
<li>Start the server: <code>./server</code></li>
<li>Start one or more clients: <code>./client</code></li>
</ol>
<h1><a class="anchor" id="autotoc_md30"></a>
Author</h1>
<p>Kim Hyo Jin</p>
<h1><a class="anchor" id="autotoc_md31"></a>
License</h1>
<p>This project is proprietary and confidential. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
